## Created by newuser for 5.9

setopt GLOB_DOTS
setopt emacs

setopt EXTENDED_HISTORY
setopt INC_APPEND_HISTORY
setopt SHARE_HISTORY
setopt HIST_IGNORE_DUPS
setopt HIST_IGNORE_ALL_DUPS
setopt HIST_IGNORE_SPACE
setopt HIST_SAVE_NO_DUPS
setopt HIST_VERIFY
setopt HIST_NO_STORE
setopt HIST_NO_FUNCTIONS
setopt HIST_REDUCE_BLANKS
setopt NO_CASE_GLOB

HISTSIZE=1000
SAVEHIST=10000
HIST_STAMPS="yyyy-mm-dd"

zmodload zsh/mathfunc

{{ if lookPath "ov" -}}
export PAGER="ov"
{{- end }}
{{- if lookPath "nvim" }}
export EDITOR="nvim"
export MANPAGER="nvim +Man!"
{{- end }}

if [ -d "$HOME/.local/bin" ];
  then PATH="$HOME/.local/bin:$PATH"
fi

if [ -f /usr/share/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh ]; then
  source /usr/share/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
fi

if [ -f /usr/share/zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh ]; then
  source /usr/share/zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh
fi

{{ if lookPath "eza" -}}
alias ls="ls --hyperlink --color=auto"
{{- end }}
{{- if lookPath "sdcv" }}
alias sdcv="sdcv -c"
{{- end }}
{{- if lookPath "rg" }}
alias rg="rg --hyperlink-format=kitty"
{{- end }}
{{- if lookPath "fd" }}
alias fd="fd --hyperlink=auto"
{{- end }}

{{ if lookPath "vivid" -}}
export LS_COLORS="$(vivid generate molokai)"
{{- end }}

autoload -U edit-command-line
zle -N edit-command-line
bindkey '\C-x\C-e' edit-command-line

autoload -Uz compinit
compinit

zstyle ':completion:*:default' list-prompt '%S%M matches%s'
zstyle ':completion:*:default' list-colors ${(s.:.)LS_COLORS}

## Group matches and describe.
zstyle ':completion:*:*:*:*:*' menu select
zstyle ':completion:*:matches' group 'yes'
zstyle ':completion:*:options' description 'yes'
zstyle ':completion:*:options' auto-description '%d'
zstyle ':completion:*:corrections' format ' %F{green}-- %d (errors: %e) --%f'
zstyle ':completion:*:descriptions' format ' %F{yellow}-- %d --%f'
zstyle ':completion:*:messages' format ' %F{purple} -- %d --%f'
zstyle ':completion:*:warnings' format ' %F{red}-- no matches found --%f'
zstyle ':completion:*' format ' %F{yellow}-- %d --%f'
zstyle ':completion:*' group-name ''
zstyle ':completion:*' verbose yes

## Fuzzy match mistyped completions.
zstyle ':completion:*' completer _complete _match _approximate
zstyle ':completion:*:match:*' original only
zstyle ':completion:*:approximate:*' max-errors 1 numeric

zstyle ':completion::complete:*' gain-privileges 1
zstyle ':completion:*' file-sort modification

## Ignore multiple entries.
zstyle ':completion:*:(rm|kill|diff):*' ignore-line other
zstyle ':completion:*:rm:*' file-patterns '*:all-files'

## Kill
zstyle ':completion:*:*:*:*:processes' command 'ps -u $LOGNAME -o pid,user,command -w'
zstyle ':completion:*:*:kill:*:processes' list-colors '=(#b) #([0-9]#) ([0-9a-z-]#)*=01;36=0=01'
zstyle ':completion:*:*:kill:*' menu yes select
zstyle ':completion:*:*:kill:*' force-list always
zstyle ':completion:*:*:kill:*' insert-ids single

{{ if lookPath "starship" -}}
eval "$(starship init zsh)"
{{- end }}
{{- if lookPath "mise" }}
eval "$(mise activate zsh)"
{{- end }}
{{- if lookPath "atuin" }}
eval "$(atuin init zsh --disable-up-arrow)"
{{- end }}

{{ if lookPath "walk" -}}
function lk {
  cd "$(walk --icons "$@")"
}
{{- end }}

{{ if lookPath "broot" -}}
source /home/Jenpin/.config/broot/launcher/bash/br
{{- end }}

{{ if lookPath "tailscale" -}}
test -e "$HOME/.shellfishrc" && source "$HOME/.shellfishrc"
{{- end }}
